@{
    Layout = "~/Views/Shared/_LayoutPublico.cshtml";
}

<style type="text/css">
    #PanelMapa {
        height: 700px;
    }
</style>

<div class="row">
    <div class="col-md-12">
        <div class="col-md-1 col-sm-6 col-xs-6"><img style="padding-top:10px;" src="~/img/iconos/mapas_big.png"></div>
        <div class="titulo_seccion col-md-11 col-sm-6 col-xs-6">MAPAS</div>
    </div>
</div>

<div class="row">
    <div class="subtitulo_seccion col-md-6 col-sm-12 col-xs-12 "><span class="fa-agrupacion fa-lg" style="text-align: left; padding: 5px;"></span>Eventos Musicales</div>
</div>

<div class="col-md-12 well carousel-search">


    <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">

            <form action="#" class="form-horizontal">
                <div class="panel panel-default">

                    <div id="PanelMapa" class="col-md-12">
                    </div>

                </div>
            </form>

        </div>
        <!-- FIN GRILLA  -->

    </div>
</div>

@section Scripts {
    <script type="text/x-handlebars-template" id="infowin_entidades-template">
        <div id="infowin_escuelas">
            <div class="col-md-12 col-sm-4 col-xs-9">
                <div class="modal-header">
                  
                    <div class="row titulo_eventoc">
                        <div class="row">
                            <div class="col-md-12">{{nombreEscenario}}</div>
                            <div class="col-md-12"><span style="color:#ffbd04">{{nombreProductor}}</span></div>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="row">
                            <div class="col-md-12 titulo_escuela">
                                <div class="col-md-2">
                                </div>
                                <div class="col-md-10 texto_modal_calendar ">{{departamento}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 titulo_escuela">
                                <div class="col-md-2">
                                </div>
                                <div class="col-md-10 texto_modal_calendar ">{{municipio}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 titulo_agendamusical">
                                <div class="col-md-2 fa-reloj fa-2x">
                                </div>
                                <div class="col-md-10 ">{{fechaInicio}}<p><span style="color:#4C2C54;">{{fechaFin}}</span></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 titulo_agendamusical">
                                <div class="col-md-2 fa-correo fa-2x">
                                </div>
                                <div class="col-md-10">
                                    {{email}}<p><span style="color:#4C2C54">{{telefono}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 titulo_agendamusical">
                                <div class="col-md-2 fa-pencil-1 fa-2x">
                                </div>
                                <div class="col-md-10">
                                    {{direccion}}<p><span style="color:#4C2C54">{{ubicacion}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        @*<div class="col-md-3 ">

                                <a href="{{ver_Mas}}" class="btn vermas_morado" target="_blank">Ver Mas</a>


                            </div>*@
                        <div class="col-md-offset-3">

                            <button type="button" class="btn vermas_morado" onclick="streetView('{{geometry.LATITUD}}', '{{geometry.LONGITUD}}')">Ver StreetView</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </script>
    <script type="text/javascript">

        $(document).on('ON_COMPLETE_LOAD_COMPONENT', function () {
            var urlHost = "http://" + window.location.host;
            window.componentMaps = new com.servinf[window.spaceName].ComponentMaps('#PanelMapa', {
                'module': com.servinf.ComponentMaps.Config.modules.VIEWER_DATA, //Indica que el mapa va a visualizar capas
                'request_position': false,  // Realizar la solicitud de la posicion actual del usuario
                'search_bar': false,        // Barra de busqueda dentro del mapa
                'streetview_panel': false,  // El panel de streetview en un porcentaje de la pantalla. Ej: 50
                'map_type': "roadmap",      // Tipo de mapa a iniciar: hybrid, satellite, terrain, roadmap
                'map_options': false,
                'initial_position': {
                    'lat': 5.065781,
                    'lng': -75.507820,
                    'zoom': 6
                },
                'details': {                // Especificaciones del vista
                    '_initialPoint': {
                        'name': "Casa Museo Casa de Nariño",
                        'routing': true,
                        'streetview': false,
                        'Latitud': 4.599872,
                        'Longitud': -74.072898,
                        'templateString': "Este es el punto inicial"
                    },
                    'layers': [{            // Capas a mostrar
                        'id': "eventos_mapa",     // Identificador de la capa, sirve para accederla de manera remota.
                        'name': "eventos",   // Nombre de la capa
                        'type': "webservice",           // Tipo de capa (catodb,webservice,cartoviz)
                        'autoload': true,               // Indica que se cargara de manera automatica la capa al iniciar el mapa
                        'keyTitle': "nombreEscenario",           // Indica el tooltip que llevaran los OVERLAYS (Objetos dibujados en el mapa)
                        'fitBounds': false,             // Indica que se hara zoom a la capa en donde sea dibujada
                        'cluster': true,                // True si quieres que clusterize (solo si la capa es de puntos)
                        'cluster_options': {            // Opciones de cluster
                            'group_key': "nombreEscenario",
                            'primary_key': "nombreEscenario",
                            'seconday_key': "municipio"
                        },
                        'heat_map': false,              // True si quieres que realize el mapa de calor (solo si la capa es de puntos)
                        'heat_map_options': {           // Opciones del Mapa de calor
                            'max_zoom': 7               // Zoom Maximo a cambiar de Mapa de calor a puntos
                        },
                        'url':  "http://pulepapp.mincultura.gov.co/maps/api/evento", // Url del servicio (En caso de que sea de tipo 'webservice)
                        'specifications': {                             // Especificaciones del servicio
                            'node_list': "eventos"                     // Indica el NODO de responseData sobre cual iterar
                        },
                        'template_settings': {                          // Infowindow
                            'element': "infowin_entidades-template"      // Nodo Plantilla de Handlebars
                        },
                        'methods': {
                            'onFetchData': function (data) {
                                console.log(data);
                            }
                        },
                        'thematic': [                   // Tematicos (Indicar Iconos, colores, etc..)
                             {
                                 'name': "evento_simus",
                                 'icon': urlHost + "/img/marcadores/mark_eventos.png",
                                 'rule': {
                                     'key': "",
                                     'operator': "*",
                                     'value': "",
                                 }

                             }
                        ]
                    }]
                }
            });
        });

       

     

    </script>
}


