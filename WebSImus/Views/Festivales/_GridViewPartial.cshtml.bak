
@{
    var grid = Html.DevExpress().GridView(settings =>
    {
        settings.Name = "gridFestivales";
        settings.CallbackRouteValues = new { Controller = "Festivales", Action = "GridViewPartial" };
        
        settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);
        settings.KeyFieldName = "Id";

        settings.SettingsPager.PageSize = 10;
        settings.SettingsBehavior.FilterRowMode = GridViewFilterRowMode.Auto;
        settings.SettingsBehavior.AllowSort = false;

        settings.SettingsPager.Visible = true;
        settings.Settings.ShowGroupPanel = true;
        settings.Settings.ShowFilterRow = true;
        settings.SettingsBehavior.AllowSelectByRowClick = true;
        settings.Settings.ShowFilterRowMenu = true;
        settings.CommandColumn.Visible = true;
        settings.CommandColumn.ShowClearFilterButton = true;
        settings.SettingsPager.PageSizeItemSettings.Visible = true;
        settings.SettingsPager.PageSizeItemSettings.Items = new string[] { "10", "20", "50" };

        settings.Columns.Add(column =>
        {
            column.Caption = "Opciones";
            column.Width = System.Web.UI.WebControls.Unit.Pixel(130);
            column.SetDataItemTemplateContent(container =>
            {
                var keyValue = container.KeyValue;
                Html.DevExpress().HyperLink(h =>
                {
                    h.Name = "ver_" + keyValue;
                    h.Properties.Text = "Ver";
                    h.NavigateUrl = Url.Action("Ver", "Festivales", new { id = keyValue });
                    h.ControlStyle.CssClass = "btn btn-default btn-xs";
                }).Render();
                ViewContext.Writer.Write("&nbsp;");
                Html.DevExpress().HyperLink(h =>
                {
                    h.Name = "edit_" + keyValue;
                    h.Properties.Text = "Editar";
                    h.NavigateUrl = Url.Action("Crear", "Festivales", new { id = keyValue });
                    h.ControlStyle.CssClass = "btn btn-default btn-xs";
                }).Render();
            });
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "Nombre";
            column.Caption = "Nombre";
            column.Width = System.Web.UI.WebControls.Unit.Percentage(20);
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "FechaCreacion";
            column.Caption = "Fecha de Creaci&oacute;n";
            column.PropertiesEdit.DisplayFormatString = "dd/MM/yyyy";
            column.Width = System.Web.UI.WebControls.Unit.Percentage(12);
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "FechaSolicitud";
            column.Caption = "Fecha Solicitud";
            column.PropertiesEdit.DisplayFormatString = "dd/MM/yyyy";
            column.Width = System.Web.UI.WebControls.Unit.Percentage(12);
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "FechaSolicitudAclaraciones";
            column.Caption = "Fecha Solicitud Aclaraciones";
            column.PropertiesEdit.DisplayFormatString = "dd/MM/yyyy";
            column.Width = System.Web.UI.WebControls.Unit.Percentage(16);
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "FechaReciboAclaraciones";
            column.Caption = "Fecha Recibo Aclaraciones";
            column.PropertiesEdit.DisplayFormatString = "dd/MM/yyyy";
            column.Width = System.Web.UI.WebControls.Unit.Percentage(16);
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "Estado";
            column.Caption = "Estado";
            column.Width = System.Web.UI.WebControls.Unit.Percentage(12);
        });
    });

    if (ViewData["EditError"] != null)
    {
        grid.SetEditErrorText((string)ViewData["EditError"]);
    }
}
@grid.Bind(Model).GetHtml()
